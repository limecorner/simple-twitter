"use strict";(self["webpackChunksimple_twitter"]=self["webpackChunksimple_twitter"]||[]).push([[927],{2927:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-page d-flex justify-content-between border border-secondary"},[a("NavBar"),a("section",{staticClass:"user-section"},[a("div",{staticClass:"home-title"},[e._v("← 推文")]),a("div",{staticClass:"d-flex"},[a("router-link",{attrs:{to:{name:"user-tweets",params:{id:e.UserId}}}},[a("img",{staticClass:"avatar",attrs:{src:e.user.avatar,alt:""}})]),a("div",[a("div",[e._v(e._s(e.user.name))]),a("div",[e._v("@"+e._s(e.user.account))])])],1),a("div",[a("p",[e._v(e._s(e.tweet.description))]),a("p",[e._v(e._s(e._f("fromNow")(e.tweet.createdAt)))])]),a("div",[a("span",[e._v(e._s(e.tweet.replyCount)+" 回覆 ")]),a("span",[e._v(" "+e._s(e.tweet.likeCount)+" 喜歡次數")])]),a("div",[a("img",{staticClass:"icon",attrs:{src:"https://i.postimg.cc/3Rb08d24/message.png",alt:"","data-toggle":"modal","data-target":"#replyTwitterModal"}}),e.tweet.isLiked?a("img",{staticClass:"icon",attrs:{src:"https://i.postimg.cc/DwdWWCqK/icon-Liked.png",alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.unlike(e.tweet.id)}}}):a("img",{staticClass:"icon",attrs:{src:"https://i.postimg.cc/YSdhRhnn/iconLike.png",alt:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.addlike(e.tweet.id)}}})]),a("div",[a("div",{staticClass:"modal fade",attrs:{id:"replyTwitterModal",tabindex:"-1",role:"dialog","aria-labelledby":"replyTwitterModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(0),a("div",[a("div",{staticClass:"d-flex"},[a("div",[a("img",{staticClass:"avatar",attrs:{src:e.user.avatar,alt:""}})]),a("div",[a("div",[a("span",[e._v(e._s(e.user.name))]),a("span",[e._v(" @"+e._s(e.user.account)+" ")]),a("span",[e._v(" "+e._s(e._f("fromNow")(e.tweet.createdAt))+" ")])]),a("p",[e._v(e._s(e.tweet.description))]),a("p",[e._v("回覆給@"+e._s(e.user.account))])])])]),a("form",{attrs:{action:""}},[a("div",[a("img",{staticClass:"avatar",attrs:{src:e.currentUser.avatar,alt:""}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.replyMessage,expression:"replyMessage"}],attrs:{cols:"40",rows:"5",placeholder:"推你的回覆",required:""},domProps:{value:e.replyMessage},on:{input:function(t){t.target.composing||(e.replyMessage=t.target.value)}}})]),a("div",[a("span",[e._v("錯誤提示文字:字數不可超過140字 ")]),a("button",{staticClass:"btn btn-info btn-w64",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.postReplyHandler()}}},[e._v(" 推文 ")])])])])])])]),a("div",e._l(e.replies,(function(t){return a("div",{key:t.id,staticClass:"tweet-card"},[a("router-link",{attrs:{to:{name:"user-tweets",params:{id:t.UserId}}}},[a("img",{staticClass:"avatar mr-2",attrs:{src:t.User.avatar,alt:""}})]),a("div",[a("div",{staticClass:"d-flex"},[a("h4",[e._v(e._s(t.User.name))]),a("p",[e._v("@"+e._s(t.User.account)+" "+e._s(e._f("fromNow")(t.createdAt)))])]),a("div",[a("p",[e._v("回覆@"+e._s(e.user.account))])]),a("div",[a("p",[e._v(" "+e._s(t.comment)+" ")])]),a("div",{staticClass:"d-flex"},[e._m(1,!0),a("div",{staticClass:"icon-group"},[a("img",{staticClass:"icon",attrs:{src:"https://i.postimg.cc/YSdhRhnn/iconLike.png",alt:""}}),e._e(),a("p",{staticClass:"font-size-14 m-0"},[e._v("76")])])])])],1)})),0)]),a("PopularUsers",{staticClass:"popular-users"})],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(' 後續 不需要文字 且 將關閉"X"符號 往左邊移動 ')]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-group mr-5"},[a("img",{staticClass:"icon",attrs:{src:"https://i.postimg.cc/3Rb08d24/message.png",alt:""}}),a("p",{staticClass:"font-size-14 m-0"},[e._v("13")])])}],n=a(6198),i=a(3019),c=(a(5666),a(8309),a(3210),a(9258)),o=a(7534),l=a(629),u=a(8247),d=(a(1926),a(8118)),p={computed:(0,i.Z)({},(0,l.rn)(["currentUser"])),components:{NavBar:c.Z,PopularUsers:o.Z},mixins:[u.q],data:function(){return{tweetId:"",tweet:{},replyMessage:"",user:{account:"",avatar:"",name:""},UserId:"",replies:[],blankContent:!1}},methods:{fetchTweetData:function(e){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.Z.getTweetDetail(e);case 3:s=a.sent,r=s.data,t.tweet=r,t.user={account:r.User.account,avatar:r.User.avatar,name:r.User.name},t.UserId=r.UserId,a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},postReplyHandler:function(){var e=this;return(0,n.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0!==e.replyMessage.trim().length){t.next=6;break}return e.blankContent=!0,t.abrupt("return");case 6:if(!(e.replyMessage.length>140)){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,d.Z.postTweetReply({tweetId:e.tweetId,comment:e.replyMessage});case 10:t.sent,e.replies.unshift({TweetId:e.tweetId,User:{account:e.currentUser.account,avatar:e.currentUser.avatar,name:e.currentUser.name},UserId:e.currentUser.id,comment:e.replyMessage,createdAt:new Date}),e.replyMessage="",e.blankContent=!1,t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},addlike:function(e){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.Z.likeTweet(e);case 3:a.sent,t.tweet.isLiked=!0,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},unlike:function(e){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.Z.unlikeTweet(e);case 3:a.sent,t.tweet.isLiked=!1,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},fetchTweetReplies:function(e){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.Z.getTweetreplies(e);case 3:s=a.sent,t.replies=s.data,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}},created:function(){this.tweetId=this.$route.params.id,this.fetchTweetData(this.tweetId),this.fetchTweetReplies(this.tweetId)}},v=p,m=a(1001),g=(0,m.Z)(v,s,r,!1,null,"a2fcaf14",null),w=g.exports}}]);
//# sourceMappingURL=927-legacy.fb247d5a.js.map