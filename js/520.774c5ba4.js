"use strict";(self["webpackChunksimple_twitter"]=self["webpackChunksimple_twitter"]||[]).push([[520],{8409:function(t,s,e){e.d(s,{Z:function(){return o}});var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"sidebar-navbar-wrapper"},[e("section",{staticClass:"sidebar-navbar"},[e("div",[e("img",{staticClass:"product-mark mb-4",attrs:{src:"https://i.postimg.cc/Qx2dm12F/Pclogo.png",alt:""}}),e("router-link",{staticClass:"tab",attrs:{to:{name:"admimTweet"}},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.navbarHandler("tweetList")}}},[e("img",{staticClass:"icon",attrs:{src:"https://i.postimg.cc/L4rVt08L/PcHome.png",alt:""}}),e("img",{staticClass:"icon-active",attrs:{src:"https://i.postimg.cc/nh1YtFYG/Pc-Home-Active.png",alt:""}}),e("p",{class:{active:t.tweetList}},[t._v("推文清單")])]),e("router-link",{staticClass:"tab",attrs:{to:{name:"admimUser"}},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.navbarHandler("userList")}}},[e("img",{staticClass:"icon",attrs:{src:"https://i.postimg.cc/qvB6y8y2/PcUser.png",alt:""}}),e("img",{staticClass:"icon-active",attrs:{src:"https://i.postimg.cc/28kSKCyD/Pc-User-Active.png",alt:""}}),e("p",{class:{active:t.userList}},[t._v("使用者列表")])])],1),e("div",{staticClass:"logout-button d-flex ml-2",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.logoutHandler.apply(null,arguments)}}},[e("img",{staticClass:"logout",attrs:{src:"https://i.postimg.cc/NjVnH4Yp/logoOut.png",alt:""}}),e("p",{staticClass:"ml-2"},[t._v("登出")])])])])},i=[],r={data(){return{userList:!1,tweetList:!1}},methods:{navbarHandler(t){"tweetList"===t?(this.tweetList=!0,this.userList=!1,this.$router.push("/admin/tweet")):"userList"===t&&(this.userList=!1,this.userList=!0,this.$router.push("/admin/user"))},logoutHandler(){localStorage.setItem("token",""),this.$router.push("/login")}}},n=r,l=e(1001),c=(0,l.Z)(n,a,i,!1,null,"5d077652",null),o=c.exports},6520:function(t,s,e){e.r(s),e.d(s,{default:function(){return g}});var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",[e("adminNavbar")],1),e("div",{staticClass:"list-wrapper"},[e("div",{staticClass:"tweet-card font-size-24 font-weight-bolder"},[t._v("推文清單")]),t._l(t.tweets,(function(s){return e("div",{key:s.id,staticClass:"tweet-card row",staticStyle:{height:"110px"}},[e("div",{staticClass:"col-1"},[e("img",{staticClass:"avatar",attrs:{src:s.User.avatar||"https://i.imgur.com/hAKcS3E.jpg",alt:""}})]),e("div",{staticClass:"col-10 pl-5"},[e("div",{staticClass:"row"},[e("h5",{staticClass:"user-name"},[t._v(t._s(s.User.name))]),e("h6",{staticClass:"account-time"},[t._v(" @"+t._s(s.User.account)+" • "+t._s(t._f("fromNow")(s.createdAt))+" ")])]),e("div",{staticClass:"row"},[e("p",{staticClass:"description"},[t._v(" "+t._s(t._f("wordsLimit")(s.description))+" ")])])]),e("div",{staticClass:"col-1",staticStyle:{padding:"5px 0px"}},[e("div",{staticClass:"d-flex justify-content-end"},[e("img",{staticClass:"iconX mr-3 mt-1",attrs:{src:"https://i.postimg.cc/CxWv1xH2/X-button.png",alt:"","data-toggle":"modal","data-target":"#deleteTweet"+s.id}}),e("div",{staticClass:"modal fade",attrs:{id:"deleteTweet"+s.id,tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0,!0),e("div",{staticClass:"modal-body"},[t._v("是否刪除該筆貼文")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteTweet(s.id)}}},[t._v(" 確定刪除 ")])])])])])])])])}))],2)])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],r=e(9032),n=e(8247),l=e(8409),c=e(9755),o=e.n(c),d=e(1926),u={data(){return{tweets:[],replyMessage:"",isLike:""}},components:{adminNavbar:l.Z},mixins:[n.q],created(){this.fetchTweets()},methods:{async fetchTweets(){try{const t=await r.Z.adminGetTweets(),{data:s}=t;this.tweets=s.tweets}catch(t){console.log(t)}},async deleteTweet(t){try{await r.Z.deleteTweets(t);this.tweets=this.tweets.filter((s=>s.id!==t)),o()(`#deleteTweet${t}`).modal("hide"),d.F.fire({icon:"success",title:"已成功刪除貼文"})}catch(s){console.log(s)}}},filters:{wordsLimit(t){return t.length<50||(t=t.substr(0,50)+"..."),t}}},m=u,p=e(1001),v=(0,p.Z)(m,a,i,!1,null,"d74ca92c",null),g=v.exports},9032:function(t,s,e){var a=e(1926);const i=()=>localStorage.getItem("token");s["Z"]={adminGetTweets(){return a.l.get("/admin/tweets",{headers:{Authorization:`Bearer ${i()}`}})},deleteTweets(t){return a.l["delete"](`/admin/tweets/${t}`,{headers:{Authorization:`Bearer ${i()}`}})},adminGetUsersList(){return a.l.get("admin/users",{headers:{Authorization:`Bearer ${i()}`}})}}}}]);
//# sourceMappingURL=520.774c5ba4.js.map